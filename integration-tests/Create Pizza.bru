meta {
  name: Create Pizza
  type: http
  seq: 2
}

post {
  url: http://localhost:3000/pizzas
  body: json
  auth: none
}

body:json {
  {
    "name": "Quattro Stagioni",
    "ingredients": [
      "tomate",
      "jambon",
      "mozzarella",
      "champignons",
      "coeurs d'artichaut",
      "olives"
    ],
    "price": 12
  }
}

assert {
  req.body: isNotEmpty
  req.body.id: isUndefined
  req.body.name: isString
  req.body.ingredients: isArray
  req.body.price: isNumber
  res.status: eq 201
  res.body.pizza.id: isNumber
}

tests {
  test("id inside HTTP Response body should be equal to id inside HTTP Response header location", ()=> expect(res.body.pizza.id).to.equal(Number(res.getHeader("location").split("/").reverse()[0])))
}
